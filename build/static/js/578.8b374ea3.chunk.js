"use strict";(self.webpackChunkfind_my_agent=self.webpackChunkfind_my_agent||[]).push([[578],{910:(e,s,t)=>{t.d(s,{A:()=>a});const a="http://localhost:8000"},578:(e,s,t)=>{t.r(s),t.d(s,{default:()=>c});var a=t(3),r=t(213),l=t(43),n=t(768),d=t(910);var i=t(579);const o=e=>{let{describes:s=[],setDescribes:t,master:o,title:c}=e;const[u,m]=(0,l.useState)(null),[x,h]=(0,l.useState)({}),[p,y]=(0,l.useState)(null),[b,f]=(0,l.useState)(!1),g=((0,a.d4)((e=>e.auth.token)),e=>{console.log(1),h({...x,[e.target.name]:e.target.value})}),w=()=>{m(null),y(null)};return(0,i.jsx)("div",{children:(0,i.jsxs)("table",{className:"min-w-full table-auto border-collapse border border-gray-200 shadow-lg rounded-lg overflow-hidden",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{className:"bg-purple-500 text-white",children:[(0,i.jsx)("th",{className:"border px-4 py-2 text-left",children:"S.No"}),(0,i.jsx)("th",{className:"border px-4 py-2 text-left",children:"Name"}),(0,i.jsx)("th",{className:"border px-4 py-2 text-center",children:"Actions"})]})}),(0,i.jsx)("tbody",{children:s&&s.length>0?s.map(((e,a)=>e&&e._id?(0,i.jsxs)("tr",{className:"hover:bg-blue-50 transition-colors duration-200",children:[(0,i.jsx)("td",{className:"border px-4 py-2 text-gray-700 text-center font-semibold",children:a+1}),(0,i.jsx)("td",{className:"border px-4 py-2 text-gray-700 font-semibold",children:u===e._id?(0,i.jsx)("input",{type:"text",name:"newName",value:void 0!==x.newName?x.newName:e.name,onChange:g,className:"w-full h-full px-3 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none text-sm",style:{fontSize:"inherit",lineHeight:"inherit"}}):(0,i.jsx)("span",{className:"block w-full h-full text-ellipsis overflow-hidden",children:e.name})}),(0,i.jsx)("td",{className:"border px-4 py-2 text-center",children:u===e._id?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{onClick:()=>(async(e,s,t,a,l,i,o,c,u)=>{s(!0);try{await r.A.put(`${d.A}/${u}/edit`,{name:t.name,newName:t.newName},{withCredentials:!0}),n.Ay.success(`${u} updated successfully!`),a(c.map((s=>s._id===e?{...s,name:t.newName}:s))),l(null)}catch(h){var m,x;const e=(null===(m=h.response)||void 0===m||null===(x=m.data)||void 0===x?void 0:x.message)||h.message||"An unexpected error occurred.";console.error("Error updating describe:",e),n.Ay.error(e)}finally{s(!1)}})(e._id,f,x,t,m,0,0,s,o),className:"bg-green-500 text-white px-3 py-1 rounded-md mr-2 hover:bg-green-600 transition-colors duration-200 disabled:opacity-50",disabled:b,children:"Save"}),(0,i.jsx)("button",{onClick:w,className:"bg-gray-500 text-white px-3 py-1 rounded-md hover:bg-gray-600 transition-colors duration-200 disabled:opacity-50",disabled:b,children:"Cancel"})]}):(0,i.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,i.jsx)("button",{onClick:()=>((e,s,t,a)=>{t(e),a({name:s,newName:s})})(e._id,e.name,m,h),className:" text-white px-3 py-1 rounded-md flex items-center justify-center  transition-colors duration-200",children:(0,i.jsx)("img",{src:"/images/icons/edit.png",alt:"Edit",className:"mr-1 w-10 hover:bg-gray-100"})}),(0,i.jsx)("button",{onClick:()=>{return a=e._id,n.Ay.dismiss(),void(0,n.Ay)((e=>(0,i.jsxs)("div",{className:"flex justify-between flex-col",children:[(0,i.jsx)("p",{className:"px-3 py-2 shadow-sm rounded-md",children:"Are you sure you want to delete this"}),(0,i.jsxs)("div",{className:"space-x-2 px-3",children:[(0,i.jsx)("button",{onClick:async()=>{try{await r.A.delete(`${d.A}/${o}/delete`,{withCredentials:!0,data:{_id:a}}),t(s.filter((e=>e._id!==a))),n.Ay.success(`${c} deleted successfully!`)}catch(l){n.Ay.error(`Failed to delete ${c}`),console.error("Error deleting describe:",l)}n.Ay.dismiss(e.id)},className:"bg-red-500 text-white px-3 py-1 rounded shadow-xl font-semibold",children:"Confirm"}),(0,i.jsx)("button",{onClick:()=>n.Ay.dismiss(e.id),className:"bg-gray-500 text-white px-3 py-1 rounded shadow-xl font-semibold",children:"Cancel"})]})]})),{duration:1/0,position:"top-center"});var a},className:" text-white px-3 py-1 rounded-md flex items-center justify-center  transition-colors duration-200",children:(0,i.jsx)("img",{src:"/images/icons/trash.png",alt:"Edit",className:"mr-1 w-10 "})})]})})]},e._id):(console.error("Invalid describe object:",e),null))):(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"3",className:"text-center px-4 py-6 text-gray-500 bg-gray-50",children:"No describes found"})})})]})})},c=e=>{const s=e.value,t=e.title,c=(0,a.d4)((e=>e.auth.token)),[u,m]=(0,l.useState)([]),[x,h]=(0,l.useState)(!1),[p,y]=(0,l.useState)(null),[b,f]=(0,l.useState)(""),[g,w]=(0,l.useState)(!1),j=async()=>{if(c){h(!0),y(null);try{const e=await r.A.get(`${d.A}/${s}/view`,{withCredentials:!0});m(e.data.data)}catch(p){var e,a;n.Ay.error(`failed to fetch ${t}`),y((null===(e=p.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||`An error occurred while fetching ${t}`)}finally{h(!1)}}};(0,l.useEffect)((()=>{j()}),[s]);return(0,i.jsxs)("div",{children:[(0,i.jsxs)("h1",{className:"text-xl font-bold mb-4","data-aos":"fade-up",children:[t," List"]}),(0,i.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),b.trim()){w(!0),y(null);try{await r.A.post(`${d.A}/${s}/add`,{name:b},{withCredentials:!0});n.Ay.success(`${t} added successfully!`),j(),f("")}catch(p){var a,l,i,o;n.Ay.error(null===(a=p.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.message),y((null===(i=p.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message)||"An error occurred while adding describe.")}finally{w(!1)}}else n.Ay.error(`Please enter a name for the ${t}.`)},className:"mb-4",children:(0,i.jsxs)("div",{className:"flex space-x-4",children:[(0,i.jsx)("input",{type:"text",value:b,onChange:e=>{f(e.target.value)},placeholder:"Enter Name",className:"peer w-56 shadow-xl border-2 px-4 rounded-lg focus:outline-none focus:ring-2  placeholder-slate-500"}),(0,i.jsx)("button",{type:"submit",className:"bg-blue-500 text-white p-2 rounded shadow-xl font-bold",disabled:g,children:g?"Adding...":"Add "})]})}),(0,i.jsx)(o,{describes:u,setDescribes:m,master:s,title:t})]})}}}]);
//# sourceMappingURL=578.8b374ea3.chunk.js.map